<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xoloitzcuintle: Terapia y Metafísica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chosen Palette: Warm Ancestral -->

    <!-- Application Structure Plan:
         Reparación de la sección "Cronología": se añade contenido estático inicial para evitar el espacio en blanco y se simplifica la lógica de transiciones para evitar errores de renderizado en navegadores móviles o de escritorio.
    -->

    <!-- Visualization & Content Choices:
         - Timeline: Se utiliza innerHTML directo con una transición de opacidad más corta (200ms).
         - Heat Map: Se mantiene la simulación en Canvas.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->

    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        .canvas-sim-container {
            position: relative;
            width: 100%;
            height: 300px;
            background-color: #1c1917;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .timeline-tab.active-tab {
            background-color: #c2410c !important;
            color: white !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            transform: scale(1.05);
            border-color: #fdba74;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 antialiased selection:bg-orange-200">

    <header class="bg-stone-900 text-stone-100 shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-fire text-orange-500 text-2xl"></i>
                <h1 class="text-xl font-bold tracking-wide uppercase">PROYECTO XOLOTL</h1>
            </div>
            <nav class="hidden md:flex space-x-6 text-sm font-medium">
                <a href="#cronologia" class="hover:text-orange-400 transition-colors">Cronología</a>
                <a href="#terapia" class="hover:text-orange-400 transition-colors">Terapia Térmica</a>
                <a href="#metafisica" class="hover:text-orange-400 transition-colors">Vínculo Metafísico</a>
            </nav>
        </div>
    </header>

    <section class="relative bg-orange-900 text-white overflow-hidden">
        <div class="max-w-5xl mx-auto px-6 py-16 md:py-24 relative z-10 text-center">
            <h2 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">El Perro Sanador</h2>
            <p class="text-lg md:text-xl text-orange-100 max-w-2xl mx-auto mb-8">
                Investigación sobre el xoloitzcuintle: terapias de calor y vinculación metafísica.
            </p>
        </div>
    </section>

    <main class="max-w-6xl mx-auto px-4 py-12 space-y-20">

        <!-- SECCIÓN 1: EVOLUCIÓN (Corregida) -->
        <section id="cronologia" class="scroll-mt-24">
            <div class="text-center mb-10">
                <h3 class="text-3xl font-bold text-stone-900 mb-3">Evolución Histórica y Terapéutica</h3>
                <p class="text-stone-600 max-w-2xl mx-auto">
                    El rol del xoloitzcuintle ha mutado a través de los siglos, pero su esencia como transmisor de energía y calor se mantiene constante. Seleccione una era para ver los detalles.
                </p>
            </div>

            <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
                <button onclick="updateTimeline('antiguo')" id="tab-antiguo" class="timeline-tab active-tab px-4 py-2 rounded-lg font-bold text-sm md:text-base transition-all bg-white border border-stone-200">
                    <i class="fas fa-pyramid mr-2"></i>Tiempos Antiguos
                </button>
                <button onclick="updateTimeline('moderno')" id="tab-moderno" class="timeline-tab px-4 py-2 rounded-lg font-bold text-sm md:text-base transition-all bg-white border border-stone-200">
                    <i class="fas fa-palette mr-2"></i>Tiempos Modernos
                </button>
                <button onclick="updateTimeline('actual')" id="tab-actual" class="timeline-tab px-4 py-2 rounded-lg font-bold text-sm md:text-base transition-all bg-white border border-stone-200">
                    <i class="fas fa-heart-pulse mr-2"></i>Actualidad
                </button>
            </div>

            <div id="timeline-content" class="bg-orange-50 rounded-2xl shadow-xl p-6 md:p-10 border-l-8 border-orange-700 transition-opacity duration-300 opacity-100">
                <!-- El contenido inicial se carga aquí para evitar que se vea vacío si JS tarda -->
                <div class="md:flex gap-6">
                    <div class="md:w-1/3 mb-4 md:mb-0 flex items-center justify-center bg-stone-200 rounded-xl min-h-[150px]">
                        <i class="fas fa-pyramid text-6xl text-stone-400"></i>
                    </div>
                    <div class="md:w-2/3">
                        <h4 class="text-2xl font-bold text-stone-800 mb-2">Tiempos Antiguos (Prehispánico)</h4>
                        <p class="text-stone-600 italic mb-4">El Xolo como medicina viva y pasaporte al inframundo.</p>
                        <div class="space-y-3">
                            <div class="flex items-start p-3 rounded bg-white shadow-sm border border-stone-100">
                                <div class="mt-1 mr-4 text-orange-600"><i class="fas fa-fire-alt fa-lg"></i></div>
                                <p class="text-stone-700 text-sm md:text-base">Uso principal: Tratamiento de reumatismo mediante el calor corporal directo al dormir con el paciente.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 2: TERAPIA TÉRMICA -->
        <section id="terapia" class="scroll-mt-24 bg-stone-100 p-6 md:p-10 rounded-3xl">
            <div class="grid md:grid-cols-2 gap-12 items-start">
                <div>
                    <h4 class="text-2xl font-bold mb-4">Física del Contacto</h4>
                    <p class="text-sm text-stone-700 mb-6">Al no tener pelo, transmiten calor por conducción pura. Funcionan como "manto térmico" sobre zonas frías.</p>
                    <div class="bg-white p-4 rounded-xl shadow-md">
                        <div class="chart-container">
                            <canvas id="tempChart"></canvas>
                        </div>
                    </div>
                </div>
                <div>
                    <h4 class="text-2xl font-bold mb-4">El Fenómeno "Cúmulo"</h4>
                    <div class="bg-orange-50 border border-orange-200 p-4 rounded-lg mb-4 text-sm italic">
                        "En Xolos Ramírez observamos como los xoloitzcuintles buscan cubrir zonas frías... gustan de dormir uno encima del otro formando estructuras o cúmulos."
                    </div>
                    <div class="canvas-sim-container shadow-inner">
                        <canvas id="heatSimCanvas"></canvas>
                        <div class="absolute bottom-2 right-2 text-xs text-stone-500 bg-stone-900 bg-opacity-75 px-2 py-1 rounded">
                            Temp Núcleo: <span id="core-temp" class="text-orange-400 font-mono">38.5°C</span>
                        </div>
                    </div>
                    <div class="mt-4 flex gap-2">
                        <button onclick="addXolo()" class="bg-stone-800 text-white text-xs px-3 py-2 rounded">Agregar Xolo</button>
                        <button onclick="resetSim()" class="bg-stone-200 text-stone-700 text-xs px-3 py-2 rounded">Reiniciar</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 3: METAFÍSICA -->
        <section id="metafisica" class="scroll-mt-24">
            <h3 class="text-3xl font-bold text-center mb-10">Vínculo Metafísico</h3>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow border-l-4 border-amber-500">
                        <h5 class="font-bold flex items-center gap-2"><i class="fas fa-ghost"></i> Guía Espiritual</h5>
                        <p class="text-sm text-stone-600">El calor es el puente entre el mundo físico y el espiritual. Su temperatura constante brindaba consuelo en la transición.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow border-l-4 border-orange-500">
                        <h5 class="font-bold flex items-center gap-2"><i class="fas fa-peace"></i> Tranquilidad y Paz</h5>
                        <p class="text-sm text-stone-600">El contacto piel con piel reduce el cortisol humano, generando un estado de paz metafísica reportado por criadores actuales.</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </section>

    </main>

    <script>
        const timelineData = {
            antiguo: {
                title: "Tiempos Antiguos (Prehispánico)",
                desc: "El Xolo como medicina viva y pasaporte al inframundo.",
                icon: "fa-pyramid",
                features: [{ icon: "fa-fire-alt", text: "Uso principal: Tratamiento de reumatismo y dolores musculares mediante pernocta." }],
                color: "bg-orange-50"
            },
            moderno: {
                title: "Tiempos Modernos (Siglo XX)",
                desc: "El rescate cultural y la revalorización del ícono.",
                icon: "fa-palette",
                features: [{ icon: "fa-paint-brush", text: "Frida Kahlo y Diego Rivera lo adoptan como símbolo de mexicanidad y salud ancestral." }],
                color: "bg-stone-100"
            },
            actual: {
                title: "Actualidad (Observación Xolos Ramírez)",
                desc: "Terapia emocional y la física del 'Cúmulo'.",
                icon: "fa-heart-pulse",
                features: [
                    { icon: "fa-layer-group", text: "Forman estructuras o cúmulos de xoloitzcuintles para conservar calor." },
                    { icon: "fa-snowflake", text: "Buscan cubrir zonas frías en las personas funcionando como manto térmico." }
                ],
                color: "bg-rose-50"
            }
        };

        function updateTimeline(era) {
            const container = document.getElementById('timeline-content');
            const data = timelineData[era];

            // 1. Manejo de pestañas
            document.querySelectorAll('.timeline-tab').forEach(t => t.classList.remove('active-tab'));
            document.getElementById(`tab-${era}`).classList.add('active-tab');

            // 2. Transición de contenido
            container.style.opacity = '0';
            
            setTimeout(() => {
                const features = data.features.map(f => `
                    <div class="flex items-start p-3 rounded bg-white shadow-sm border border-stone-100">
                        <div class="mt-1 mr-4 text-orange-600"><i class="fas ${f.icon} fa-lg"></i></div>
                        <p class="text-stone-700 text-sm md:text-base">${f.text}</p>
                    </div>
                `).join('');

                container.innerHTML = `
                    <div class="md:flex gap-6">
                        <div class="md:w-1/3 mb-4 md:mb-0 flex items-center justify-center bg-stone-200 rounded-xl min-h-[150px]">
                            <i class="fas ${data.icon} text-6xl text-stone-400"></i>
                        </div>
                        <div class="md:w-2/3">
                            <h4 class="text-2xl font-bold text-stone-800 mb-2">${data.title}</h4>
                            <p class="text-stone-600 italic mb-4">${data.desc}</p>
                            <div class="space-y-3">${features}</div>
                        </div>
                    </div>
                `;
                container.className = `${data.color} rounded-2xl shadow-xl p-6 md:p-10 border-l-8 border-orange-700 transition-opacity duration-300 opacity-100`;
            }, 200);
        }

        // Gráficos e inicialización
        window.onload = function() {
            // Chart 1: Bar
            new Chart(document.getElementById('tempChart'), {
                type: 'bar',
                data: {
                    labels: ['Humano', 'Perro c/Pelo', 'Xoloitzcuintle'],
                    datasets: [{
                        label: 'Temp. Superficial (°C)',
                        data: [33, 30, 40],
                        backgroundColor: ['#78716c', '#a8a29e', '#c2410c']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });

            // Chart 2: Radar
            new Chart(document.getElementById('radarChart'), {
                type: 'radar',
                data: {
                    labels: ['Calor', 'Paz', 'Guía', 'Empatía', 'Protección'],
                    datasets: [{
                        label: 'Atributos Metafísicos',
                        data: [95, 90, 85, 92, 80],
                        borderColor: '#c2410c',
                        backgroundColor: 'rgba(194, 65, 12, 0.2)'
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });

            // Init Canvas Sim
            initHeatSim();
        };

        // Simulación de Calor (Canvas)
        let xolos = [];
        const simCanvas = document.getElementById('heatSimCanvas');
        const simCtx = simCanvas.getContext('2d');

        function initHeatSim() {
            simCanvas.width = simCanvas.parentElement.clientWidth;
            simCanvas.height = simCanvas.parentElement.clientHeight;
            addXolo(); addXolo();
            animate();
        }

        function addXolo() {
            if (xolos.length < 10) {
                xolos.push({
                    x: Math.random() * simCanvas.width,
                    y: Math.random() * simCanvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5
                });
                document.getElementById('core-temp').innerText = (38.5 + (xolos.length * 0.2)).toFixed(1) + "°C";
            }
        }

        function resetSim() { xolos = []; addXolo(); }

        function animate() {
            simCtx.clearRect(0, 0, simCanvas.width, simCanvas.height);
            simCtx.globalCompositeOperation = 'screen';
            xolos.forEach(x => {
                x.x += x.vx; x.y += x.vy;
                if (x.x < 0 || x.x > simCanvas.width) x.vx *= -1;
                if (x.y < 0 || x.y > simCanvas.height) x.vy *= -1;

                const grad = simCtx.createRadialGradient(x.x, x.y, 5, x.x, x.y, 80);
                grad.addColorStop(0, 'rgba(234, 88, 12, 0.5)');
                grad.addColorStop(1, 'transparent');
                simCtx.fillStyle = grad;
                simCtx.beginPath(); simCtx.arc(x.x, x.y, 80, 0, Math.PI*2); simCtx.fill();
            });
            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>
